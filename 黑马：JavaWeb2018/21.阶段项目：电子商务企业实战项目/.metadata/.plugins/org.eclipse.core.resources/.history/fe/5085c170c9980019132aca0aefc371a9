package cn.itcast.store.service.serviceImpl;

import java.sql.SQLException;

import cn.itcast.store.dao.OrderDao;
import cn.itcast.store.dao.daoImpl.OrderDaoImpl;
import cn.itcast.store.domain.Order;
import cn.itcast.store.domain.OrderItem;
import cn.itcast.store.service.OrderService;
import cn.itcast.store.utils.JDBCUtils;

public class OrderServiceImpl implements OrderService
{

	public void saveOrder(Order order)
	{
		// TODO 保存订单和订单下所有的订单项（同时成功或者失败）
		try
		{
			JDBCUtils.startTransaction();
			OrderDao orderDao = new OrderDaoImpl();
			orderDao.saveOrder(order);
			for (OrderItem orderItem : order.getList())
			{
				orderDao.saveOrderItem(orderItem);
			}
		}
		catch (SQLException e)
		{
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}

}
